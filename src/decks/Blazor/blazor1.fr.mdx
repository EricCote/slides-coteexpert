# Introduction à Blazor

{/* from https://learn.microsoft.com/en-us/training/modules/blazor-introduction/ */}

---

## Pourquoi Blazor

- Bâtir des applications web est difficile
- Il y a une panoplie de Framework JavaScript
- Difficile à intégrer entre eux
  <br />
  <br />
- Blazor permet de créer une app en C# et .NET
- Utilise une approche orientée composant

[<img width="70%" src="https://learn.microsoft.com/en-us/training/aspnetcore/blazor-introduction/media/intro-architecture.jpg" />](https://learn.microsoft.com/en-us/training/aspnetcore/blazor-introduction/media/intro-architecture.jpg)

---

## Définitions

- .NET
- Razor
- Blazor
- Blazor Server
- Blazor WebAssembly
- Bâtir une application
- Pages
- Composants

---

## Définitions

<dl>
  <dt>.NET</dt>
  <dd>.NET est un écosystème pour le développement et le déploiement d'applications (desktop, mobile, tablette, infonuagique, IOT). Cela utilise des langages tel que Visual Basic, C# ou F#. On utilise les outils .NET, pour analyser ou compiler, en utilisant la ligne de commande, ou à travers des programmes tels que _Visual Studio_ ou _Visual Studio Code_.</dd>
  <hr/>
  <dt>Razor</dt>
  <dd>_Razor_ est un format pour générer du contenu basé sur du texte, comme HTML. Les fichiers _Razor_ ont une extension de fichier `.cshtml` ou `.razor`, et contiennent un mélange de code C# et HTML.</dd>
  <hr/>
  <dt>Blazor</dt>
  <dd>Blazor est un framework d’interface utilisateur construit sur .NET et Razor. Les applications Blazor peuvent s’exécuter sur un serveur ASP.NET, ou peuvent être déployées pour s’exécuter dans un navigateur.</dd>

</dl>

---

## Blazor Server

- Application déployée sur un serveur web ASP.NET Core.
- Retourne du HTML
- L'interactivité est fournie par un pipeline de communication bidirectionnel
- Basé sur SignalR, en utilisant une connexion Web Sockets
  <hr />
- Les interactions (ex: cliquer bouton, naviguer, etc) transmettent l'action sur la connexion SignalR.
- Le serveur répond avec des mises à jour de l’IU en utilisant la même connexion.
- Le framework Blazor Server met à jour le navigateur (avec le contenu généré sur le serveur web)

---

## Blazor WebAssembly

- Blazor WASM est une implémentation de Blazor
- Exécuté par le runtime WebAssembly (standard HTML5) présent dans les navigateurs
- La sortie binaire de la compilation (fichiers DLL) est transmise au navigateur
- Roule une version de .NET optimisée pour WebAssembly
- Roule indépendamment du système d’exploitation sous-jacent
  <hr />
- Possible de déployer des fichiers qu'un le serveur Web ne roulerait pas
- Réduit les exigences pour un serveur Web
- Déplace le travail vers l’utilisateur
  <hr />
- Exécuté entièrement dans le navigateur
- Pour accéder des données ou interagir avec services, utiliser Web API et services REST HTTP

---

## Bâtir une app Blazor

- Écrivez le code avec un éditeur de texte
- Compilez avec les outils .NET
- Choisissez le bon gabarit
  - Blazor (server)
  - ou Blazor WASM
- Ajoutez pages Razor
- Blazor fournit un pont interopérant avec JavaScript
- Intégrez d’autres services, comme une base de données ou un service Web
- Référencez des bibliothèques en utilisant des packages NuGet, le format d’emballage .NET
  <hr />
- Bâtissez en utisant les outils de compilation .NET
- Publiez l’application résultante sur un serveur web

---

## Page

- Une page est un document Razor qui présente un écran de contenu au navigateur
- Chaque page est généralement directement mappée à une adresse web

---

## Composants

- Permet la réutilisation d'une partie de Page
- Un composant Razor est une partie autonome de l’interface utilisateur
  - Avec une logique de traitement pour permettre un comportement dynamique
- Pourra être référencé et utilisé dans d’autres composants ou pages

---

## Quand devrait-on utiliser Blazor?

Voici une liste de critères pour déterminer si Blazor est un bon choix:

- Familiarité .NET
- Intégration avec du .NET existant
- Serveurs existants
- Complexité de l'application
- Besoins réseaux
- Besoins en sécurité de code
  <hr />
  <br />
- Blazor permet de réutiliser nos investissements en .NET
  - Moins intéressant si notre organisation n'utilise pas .NET

---

## Tableau décisionnel

<table className='table align-middle table-striped-columns'>
  <thead>
    <tr>
      <th>Critère</th>
      <th>Blazor Server</th>
      <th>Blazor WASM</th>
    </tr>
  </thead>
  <tbody className='table-group-divider'>
    <tr>
      <td>Familiarité en .NET</td>
      <td>Similaire à ASP.NET WebForms</td>
      <td>Similaire à WinForms</td>
    </tr>
    <tr>
      <td>Intégration avec du .NET existant</td>
      <td>Simple avec ASP.NET Core</td>
      <td>Interaction directe, sans passer par le serveur web</td>
    </tr>
    <tr>
      <td>Serveurs web existants</td>
      <td>Serveurs utilisants ASP.NET Core</td>
      {/* prettier-ignore */}
      <td>Serveurs non-nécessaires (sauf en cas de rendu serveur -> Server-Side render)</td>
    </tr>
    <tr>
      <td>Complexité de l'application</td>
      <td>Peut profiter d'un _server farm_ et traitements distribués</td>
      <td>Peut profiter du processeur natif sur le poste client</td>
    </tr>
    <tr>
      <td>Besoins réseaux</td>
      <td>Toujours connecté sur serveur</td>
      <td>
        Possible de rouler en mode déconnecté (ou occasionnellement connecté)
      </td>
    </tr>
    <tr>
      <td>Besoins en sécurité de code</td>
      <td>Roule sur un serveur dans une région géographique spécifique</td>
      <td>Roule n'importe où</td>
    </tr>
  </tbody>
</table>
---
